(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(6),c=n.n(r),s=(n(13),n(8)),l=n(3),u=n(1);n(14);var i=function(e){var t=e.callLoginService,n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],s=r[1];return o.a.createElement("div",{className:"login"},o.a.createElement("label",null,"Username:",o.a.createElement("input",{onChange:function(e){s(e.target.value)},value:c})),o.a.createElement("button",{className:"login-button",onClick:function(e){t(c),s("")}},"LOGIN!"))};var h=function(e){var t=e.userName,n=e.callAddTaskService,r=Object(a.useState)(""),c=Object(u.a)(r,2),s=c[0],l=c[1];return o.a.createElement("div",null,o.a.createElement("label",null,"New Task:",o.a.createElement("input",{onChange:function(e){l(e.target.value)},value:s})),o.a.createElement("button",{onClick:function(e){n(t,s),l("")}},"append"))};var m=function(e){var t=e.userName,n=e.callAddTaskService;return o.a.createElement("div",null,o.a.createElement(h,{userName:t,callAddTaskService:n}))};var f=function(e){for(var t=e.showDoneTasks,n=e.tasks,r=e.setTasks,c=e.handleDone,s=e.taskId,l=e.title,i=e.removeTask,h=e.editTask,m=e.username,f=Object(a.useState)(l),d=Object(u.a)(f,2),k=d[0],g=d[1],E=function(){i(m,s)},v=function(){h(m,s,k)},j=function(e){g(e.target.value)},b=function(e){console.log(e.target.checked),c(n,s,r,e.target.checked)},p=!1,O=0;O<n.length;O++)if(n[O].taskId===s){p=n[O].done;break}return t?o.a.createElement("li",{key:s,taskid:s},o.a.createElement("span",null,o.a.createElement("input",{type:"checkbox",onChange:b})),o.a.createElement("input",{onChange:j,value:k}),o.a.createElement("span",null,o.a.createElement("button",{onClick:v},"EDIT")),o.a.createElement("span",null,o.a.createElement("button",{onClick:E},"REMOVE"))):o.a.createElement("li",{className:p.toString(),key:s,taskid:s},o.a.createElement("span",null,o.a.createElement("input",{type:"checkbox",onChange:b})),o.a.createElement("input",{onChange:j,value:k}),o.a.createElement("span",null,o.a.createElement("button",{onClick:v},"EDIT")),o.a.createElement("span",null,o.a.createElement("button",{onClick:E},"REMOVE")))};var d=function(e){var t=e.showDoneTasks,n=e.setTasks,a=e.handleDone,r=e.removeTask,c=e.editTask,s=e.username,l=e.tasks;return o.a.createElement("div",null,o.a.createElement("ul",null,l.map((function(e){return o.a.createElement(f,{showDoneTasks:t,tasks:l,setTasks:n,handleDone:a,removeTask:r,editTask:c,key:e.taskId,username:s,taskId:e.taskId,title:e.task})}))))};var k=function(e){var t=e.setTheme,n=e.callUpdateTheme,a=e.userName;return o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"theme-select"},"Choose a theme:"),o.a.createElement("select",{onChange:function(e){console.log(e.target.value),t(e.target.value),n(a,e.target.value)},name:"themes",id:"theme-select"},o.a.createElement("option",{value:""},"--Please choose a theme--"),o.a.createElement("option",{value:"colorful"},"colorful"),o.a.createElement("option",{value:"dark"},"dark"),o.a.createElement("option",{value:"light"},"light")))};var g=function(e){var t=e.setShowDoneTasks,n=Object(a.useState)(!0),r=Object(u.a)(n,2),c=r[0],s=r[1];return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("input",{type:"checkbox",onChange:function(e){s(e.target.checked),t(c)},checked:c}),"Hide Done"))};var E=function(e){var t=e.sortDone,n=e.sortNotDone,r=e.sortAscending,c=e.sortDescending,s=Object(a.useState)(""),l=Object(u.a)(s,2),i=l[0],h=l[1];return o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"sort-select"},"sort by:"),o.a.createElement("select",{onChange:function(e){h(e.target.value)}},o.a.createElement("option",null,"--Please choose sort method--"),o.a.createElement("option",null,"Alphabetically Ascending"),o.a.createElement("option",null,"Alphabetically Descending"),o.a.createElement("option",null,"Done First"),o.a.createElement("option",null,"Not Done First")),o.a.createElement("button",{onClick:function(){"Alphabetically Ascending"===i?r():"Alphabetically Descending"===i?c():"Done First"===i?t():"Not Done First"===i&&n()}},"Refresh"))};n(15);var v=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),h=Object(u.a)(c,2),f=h[0],v=h[1],j=Object(a.useState)(""),b=Object(u.a)(j,2),p=b[0],O=b[1],T=Object(a.useState)("light"),y=Object(u.a)(T,2),w=y[0],D=y[1],S=Object(a.useState)(!0),P=Object(u.a)(S,2),N=P[0],C=P[1];Object(a.useEffect)((function(){fetch("/session",{method:"GET"}).catch((function(){return Promise.reject({code:"newwork-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){console.log("You are logged in!");var t=e.data.username;e.data.theme;O(t),r(!0),I(t),A(t)})).catch((function(e){console.log("Not logged in!"),r(!1)}))}),[]);var I=function(e){(function(e){return fetch("/theme/"+e,{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e).then((function(e){var t=e.data;console.log(t),"funky"!==t&&D(t)})).catch((function(e){console.log("fetch theme failed")}))},A=function(e){(function(e){return fetch("/tasks/"+e,{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e).then((function(e){var t=function(e){for(var t=[],n=e.data,a=0;a<Object.keys(n).length;a++){var o=Object.keys(n)[a],r={task:""};r.taskId=o,r.done=!1;for(var c=0;c<Object.keys(n[o]).length-1;c++)r.task+=n[o][c];t.push(r)}return console.log(t),t}(e);v(t)})).catch((function(e){console.log(e.message)}))},F=n?o.a.createElement(m,{userName:p,callAddTaskService:function(e,t){(function(e,t){return fetch("/tasks/"+e,{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:t})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e,t).then((function(e){var t=function(e){var t=e.data,n={task:""};n.taskId=t.taskId,n.done=!1;for(var a=0;a<Object.keys(t).length-1;a++)n.task+=t[a];return n}(e);f.push(t),v(f)})).catch((function(e){console.log(e.message)})),A(p)}}):o.a.createElement(i,{callLoginService:function(e){O(e),function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e).then((function(e){r(!0),I(e.data.username),A(e.data.username),console.log("login successful")})).catch((function(e){console.log("login failed")}))}}),J=n?o.a.createElement(d,Object(s.a)({showDoneTasks:N,tasks:f,setTasks:v,handleDone:function(e,t,n,a){for(var o=0;o<e.length;o++)if(e[o].taskId===t){e[o].done=a;break}n(e)},removeTask:function(e,t){(function(e,t){return fetch("/tasks/"+e+"/"+t,{method:"DELETE"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e,t).then((function(e){for(var t=e.data,n=[],a=0;a<f.length;a++)f[a].taskId!==t.taskId&&n.push(f[a]);v(n)})).catch((function(e){console.log(e.message)}))},editTask:function(e,t,n){(function(e,t,n){return fetch("/tasks/"+e+"/"+t,{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:n})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e,t,n).then((function(e){var t=e.data;console.log(t);for(var n=[],a=0;a<f.length;a++)f[a].taskId!==t.taskId?n.push(f[a]):n.push(t);v(n)})).catch((function(e){console.log(e.message)}))},username:p},"tasks",f)):"",H=n?o.a.createElement(E,{sortDone:function(){v(Object(l.a)(f.sort((function(e,t){return e.done>t.done?-1:e.done<t.done?1:0}))))},sortNotDone:function(){v(Object(l.a)(f.sort((function(e,t){return e.done>t.done?1:e.done<t.done?-1:0}))))},sortAscending:function(){v(Object(l.a)(f.sort((function(e,t){return e.task>t.task?1:e.task<t.task?-1:0}))))},sortDescending:function(){v(Object(l.a)(f.sort((function(e,t){return e.task>t.task?-1:e.task<t.task?1:0}))))},tasks:f,setTasks:v}):"",U=n?o.a.createElement(k,{setTheme:D,callUpdateTheme:function(e,t){(function(e,t){return fetch("/theme/"+e,{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({theme:t})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))},userName:p}):"",x=n?o.a.createElement(g,{setShowDoneTasks:C}):"";return o.a.createElement("div",null,o.a.createElement("div",{className:w},F,U,H,x,J))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.7fe273e4.chunk.js.map