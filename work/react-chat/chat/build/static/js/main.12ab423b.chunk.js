(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],[,,,function(e,t,n){},,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),s=(n(10),n(1));var l=function(e){var t=e.handleClick;return r.a.createElement("div",{className:"logout"},r.a.createElement("button",{className:"logout-button",onClick:t},"logout"))};var i=function(e){var t=e.messages;return r.a.createElement("li",null,r.a.createElement("div",{className:"messages"},r.a.createElement("div",{className:"meta-info"},r.a.createElement("div",{className:"sender-info"},r.a.createElement("span",{className:"username"},t.sender)),r.a.createElement("div",{className:"message-info"},r.a.createElement("span",{className:"timestamp"},t.timestamp))),r.a.createElement("p",{className:"message-text"},t.text)))};var u=function(e){var t=e.messages;return r.a.createElement("ol",{className:"messages"},t.map((function(e,t){return r.a.createElement(i,{messages:e,key:t})})))};var m=function(e){var t=e.users;return r.a.createElement("ul",{className:"user-list"},Object.values(t).map((function(e,t){return r.a.createElement("li",{key:t},e.username)})))};var f=function(e){var t=e.callForSendMessage,n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],l=c[1];return r.a.createElement("div",{className:"send-message"},r.a.createElement("input",{className:"new-message",onKeyUp:function(e){l(e.target.value)}}),r.a.createElement("button",{type:"submit",onClick:function(){t(o),l("")}},"enter"))};n(3);var h=function(e){var t=e.users,n=e.messages,a=e.handleClick,c=e.callForSendMessage;return r.a.createElement("div",{className:"App"},"Welcome to the ChatRoom my little brother!",r.a.createElement(m,{users:t}),r.a.createElement(u,{messages:n}),r.a.createElement(f,{callForSendMessage:c}),r.a.createElement(l,{handleClick:a}))};var d=function(e){var t=e.callForLogin,n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],l=c[1];return r.a.createElement("div",{className:"login"},r.a.createElement("label",null,"Username: ",r.a.createElement("input",{onKeyUp:function(e){l(e.target.value)}})),r.a.createElement("button",{className:"login-button",onClick:function(e){t(o)}},"LOGIN"))};var g=function(e){var t=e.error;return console.log(t),r.a.createElement("div",{className:"error"},r.a.createElement("p",null,t))};var E=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),l=Object(s.a)(o,2),i=l[0],u=l[1],m=Object(a.useState)([]),f=Object(s.a)(m,2),E=f[0],v=f[1],j=Object(a.useState)([]),p=Object(s.a)(j,2),b=p[0],k=p[1],N=function(e){(function(e){return fetch("/login",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e).then((function(e){k(e.users),v(e.messages),u(""),c(!0)})).catch((function(e){u(e.code)}))};Object(a.useEffect)((function(){fetch("/login",{method:"GET"}).catch((function(){return Promise.reject({code:"newwork-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){c(!0),N("existingUser")})).catch((function(e){c(!1)}))}),[]);var O=void 0;return O=n?r.a.createElement(h,{users:b,messages:E,handleClick:function(){fetch("/logout",{method:"DELETE"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){c(!1)})).catch((function(e){u(e.code)}))},callForSendMessage:function(e){(function(e){return fetch("/sendMessage",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({message:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e).then((function(e){k(e.users),v(e.messages)})).catch((function(e){u(e)}))}}):r.a.createElement(d,{callForLogin:N}),r.a.createElement("div",{className:"App"},O,r.a.createElement(g,{error:i}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.12ab423b.chunk.js.map